jQuery(document).ready(function(e){function r(r){var t=e(".search-result");t.empty();var a=(void 0!==r.queries.nextPage?r.queries.nextPage[0]:void 0,void 0!==r.queries.previousPage?r.queries.previousPage[0]:void 0,void 0!==r.queries.request?r.queries.request[0]:void 0,'<span class="search-hits">'+r.searchInformation.formattedTotalResults+'</span> träffar på <span class="search-query">'+r.queries.request[0].searchTerms+"</span> inom Helsingborg.se");e(".search-hits-info").html(a),e.each(r.items,function(r,a){var n=e('<li class="search-result-item"><div class="search-result-item-content"></div></li>'),i=a.pagemap.metatags[0],u=null;void 0!==i.moddate?u=s(i.moddate):void 0!==i.pubdate&&(u=s(i.pubdate)),n.find(".search-result-item-content").append("PDF/Adobe Acrobat"==a.fileFormat?'<h3><a href="'+a.link+'" class="pdf-item">'+a.htmlTitle+"</a></h3>":'<h3><a href="'+a.link+'" class="link-item">'+a.htmlTitle+"</a></h3>"),n.find(".search-result-item-content").append("<p>"+e.trim(a.htmlSnippet)+"</p>"),n.find(".search-result-item-content").append('<div class="search-result-item-info"></div>'),n.find(".search-result-item-info").append('<span class="search-result-item-url"><i class="fa fa-globe"></i> <a href="'+a.link+'">'+a.htmlFormattedUrl+"</a></span>"),n.find("h3").append('<span class="search-result-item-date"><i class="fa fa-clock-o"></i> '+u+"</span>"),t.append(n)})}function s(e){if(e.length>20){var r=e.substring(2,6),s=e.substring(6,8),a=e.substring(8,10);return s=t(s),a+" "+s+" "+r}if(11==e.length)return e=e.replace("May","Maj"),e=e.replace("Oct","Okt");if(8==e.length){var r=e.substring(0,4),s=e.substring(4,6),a=e.substring(6,e.length);return s=t(s),a+" "+s+" "+r}return""}function t(e){switch(e){case"01":return"Jan";case"02":return"Feb";case"03":return"Mar";case"04":return"Apr";case"05":return"Maj";case"06":return"Jun";case"07":return"Jul";case"08":return"Aug";case"09":return"Sep";case"10":return"Okt";case"11":return"Nov";case"12":return"Dec"}}var a={action:"search",keyword:query,index:"1"};e.post(ajaxurl,a,function(e){r(JSON.parse(e))})});