jQuery(document).ready(function(e){function a(a){var r=e(".search-result");r.empty();var s=void 0!==a.queries.nextPage?a.queries.nextPage[0]:void 0,c=void 0!==a.queries.previousPage?a.queries.previousPage[0]:void 0,l=(void 0!==a.queries.request?a.queries.request[0]:void 0,'<span class="search-hits">'+a.searchInformation.formattedTotalResults+'</span> träffar på <span class="search-query">'+a.queries.request[0].searchTerms+"</span> inom Helsingborg.se");e(".search-hits-info").html(l),e.each(a.items,function(a,s){var n=e('<li class="search-result-item"><div class="search-result-item-content"></div></li>'),i=s.pagemap.metatags[0],c=null;void 0!==i.moddate?c=t(i.moddate):void 0!==i.pubdate&&(c=t(i.pubdate)),n.find(".search-result-item-content").append('<span class="search-result-item-date">'+c+"</span>"),n.find(".search-result-item-content").append("PDF/Adobe Acrobat"==s.fileFormat?'<h3><a href="'+s.link+'" class="pdf-item">'+s.htmlTitle+"</a></h3>":'<h3><a href="'+s.link+'" class="link-item">'+s.htmlTitle+"</a></h3>"),n.find(".search-result-item-content").append("<p>"+e.trim(s.htmlSnippet)+"</p>"),n.find(".search-result-item-content").append('<div class="search-result-item-info"></div>'),n.find(".search-result-item-info").append('<span class="search-result-item-url"><i class="fa fa-globe"></i> <a href="'+s.link+'">'+s.htmlFormattedUrl+"</a></span>"),r.append(n)}),void 0!==c?(i={action:"search",keyword:query,index:c.startIndex.toString()},e('[data-action="prev-page"]').show()):e('[data-action="prev-page"]').hide(),void 0!==s?(n={action:"search",keyword:query,index:s.startIndex.toString()},e('[data-action="next-page"]').show()):e('[data-action="next-page"]').hide()}function t(e){if(e.length>20){var a=e.substring(2,6),t=e.substring(6,8),s=e.substring(8,10);return t=r(t),s+" "+t+" "+a}if(11==e.length)return e=e.replace("May","Maj"),e=e.replace("Oct","Okt");if(8==e.length){var a=e.substring(0,4),t=e.substring(4,6),s=e.substring(6,e.length);return t=r(t),s+" "+t+" "+a}return""}function r(e){switch(e){case"01":return"Jan";case"02":return"Feb";case"03":return"Mar";case"04":return"Apr";case"05":return"Maj";case"06":return"Jun";case"07":return"Jul";case"08":return"Aug";case"09":return"Sep";case"10":return"Okt";case"11":return"Nov";case"12":return"Dec"}}var s={action:"search",keyword:query,index:"1"},n=null,i=null;e.post(ajaxurl,s,function(e){a(JSON.parse(e))}),e('[data-action="prev-page"], [data-action="next-page"]').hide(),e('[data-action="next-page"]').on("click",function(){e(".search-result").html('<li class="event-times-loading"><i class="hbg-loading">Läser in resultat…</i></li>'),e.post(ajaxurl,n,function(t){e("html, body").animate({scrollTop:0},"fast"),a(JSON.parse(t))})}),e('[data-action="prev-page"]').on("click",function(){e(".search-result").html('<li class="event-times-loading"><i class="hbg-loading">Läser in resultat…</i></li>'),e.post(ajaxurl,i,function(t){e("html, body").animate({scrollTop:0},"fast"),a(JSON.parse(t))})})});